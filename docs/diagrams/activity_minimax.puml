@startuml activity_minimax

title Minimax Algorithm with Alpha-Beta Pruning - Activity Diagram

start

:Receive game state and depth;
:Initialize α = -∞, β = +∞;
:Set maximizing = true (AI's turn);

:Call minimax(state, depth, α, β, maximizing);

if (depth == 0 OR game_over?) then (yes)
    :Return evaluate(state);
    note right
        **Evaluation considers:**
        - Win/Loss: ±100,000,000
        - Center control bonus
        - 3-in-a-row threats
        - 2-in-a-row potential
    end note
    stop
else (no)
endif

if (maximizing?) then (yes)
    :value = -∞;
    
    partition "Explore Children" {
        while (more valid columns?) is (yes)
            :Get next valid column;
            :Create child state with move;
            :child_value = minimax(child, depth-1, α, β, false);
            
            if (child_value > value) then (yes)
                :value = child_value;
                :best_move = column;
            endif
            
            :α = max(α, value);
            
            if (α ≥ β) then (yes)
                #pink:BETA CUTOFF;
                note right
                    Prune remaining branches
                    (opponent won't allow this path)
                end note
                break
            endif
        endwhile (no)
    }
    
    :Return value;
    
else (no)
    :value = +∞;
    
    partition "Explore Children" {
        while (more valid columns?) is (yes)
            :Get next valid column;
            :Create child state with move;
            :child_value = minimax(child, depth-1, α, β, true);
            
            if (child_value < value) then (yes)
                :value = child_value;
            endif
            
            :β = min(β, value);
            
            if (α ≥ β) then (yes)
                #lightblue:ALPHA CUTOFF;
                note left
                    Prune remaining branches
                    (maximizer has better option)
                end note
                break
            endif
        endwhile (no)
    }
    
    :Return value;
    
endif

stop

legend right
    **Complexity Analysis**
    |= Scenario |= Complexity |
    | Without pruning | O(b^d) |
    | Best case (optimal ordering) | O(b^(d/2)) |
    | Average case | O(b^(3d/4)) |
    | Worst case (reverse ordering) | O(b^d) |
    
    For Connect Four (b≈7, d=6):
    - Worst: 117,649 nodes
    - Best: 343 nodes (99.7% reduction)
    - Observed avg: ~11,400 nodes
endlegend

@enduml
